<h1 align="center">WRITING COMPLEX PIANO SCORES</h3>

With Spontini-Editor it is possible to write complex scores for piano, combining polyphony and cross-staff, which is very common in music from (at least) the end of XIX century onwards.
Here we examine a fragment of a prelude to Debussy ("Danseuses de Delphes"), which can be downloaded from the **[IMSLP](https://imslp.org/wiki/Pr%C3%A9ludes%2C_Livre_1_(Debussy%2C_Claude))** website.

<p align="center">
  <img src="debussy-frag-1.jpeg" />
</p>

Spontini-Editor allows you to combine voices in polyphony with the cross-staff using the **\easyCrossStaffB** function, which adds up to 4 levels of polyphony, both to the upper and lower staff, in addition to the cross-staff layer.

In Debussy's prelude we can generally identify, in addition to a cross-staff layer, a polyphony layer on the lower staff and another layer on the upper staff.
For example, in the bar that follows, we identify the cross-staff layer with blue color, with red the additional voice on the upper staff and with green the additional voice on the lower staff.

![img](debussy-frag-2.jpeg)

The \easyCrossStaffB function can be obtained by pressing the **"Ctrl-2"** keys, adding the letter **"B"** to the word "\easyCrossStaff", positioning the cursor on the next line and pressing the **"Ctrl-3"** keys. The following expression will be generated:

```
\easyCrossStaffB %TMODE
  { s \CS }
  { s \CS }
#'( - \CS )
  %% UPPER STAFF %%
  {} {} {} {}
  %% LOWER STAFF %%
  {} {} {} {}
```

The first two { s \CS } expressions under "\easyCrossStaffB %TMODE" are reserved for the Cross-staff layer.
The four {} expressions under "UPPER STAFF" and "LOWER STAFF" allow you to enter as many additional voices in polyphony for each staff.
The first six bars of Debussy's prelude were made in **[THIS](easy-cross-staff-example-4.ly)** example. As you can see, given the complexity of the score, it was necessary to make further tuning of **many** graphic objects (curves, beams, dots, dynamics and accidentals: 19 objects to be adjusted are shown with red color in the below picture):

<p align="center">
  <img src="debussy-frag-1-lily-00.svg" />
</p>

All this tuning has been made using the mouse with the **\jsTweak**, **\jsOnceOffset** and **\jsShape** functions, as you can see with the editor by opening the **[discussed example](easy-cross-staff-example-4.ly)**.
Here's the improved result (note that some issues of the historical engraving are fixed as well):

<p align="center">
  <img src="debussy-frag-1-lily-01.svg" />
</p>

Let's now consider another case: when the notes of the two staves are in polyphony, but without cross-staff.
In this case, you can use the functions **\tabularTwoStavesPolyI/II/III/IV**. 
These functions are automatically generated by pressing the "Ctrl-1" keys, adding the letter "I" (or "II" or "III" or "IV") to the string \tabularTwoStavesPoly, placing the cursor on the next line and pressing the keys "Ctrl-3". For example, in the case of \tabularTwoStavesPolyII the following expression will be generated:
    
```
\tabularTwoStavesPolyII %TMODE
  { \CS }
  { \CS }% _
  { \CS }%
  { \CS }
```

All the rows in this table are automatically formatted by the editor, as it happens with the rows of the \easyCrossStaff table. By pressing "Ctrl-3", after placing the cursor on the first row of the table, you can add a new column. Look at **[THIS](tabular-poly-example.ly)** example to better understand.
